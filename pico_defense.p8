pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
-- pico defense
-- by widearchshark

function _init()
	cinit = init_menu
	cupdate = update_menu
	cdraw = draw_menu
	
	cinit()
end

function _update()
	cupdate()
end

function _draw()
	cdraw()
end

function change_state(ninit,nupdate,ndraw)
	cinit = ninit
	cupdate = nupdate
	cdraw = ndraw
	cinit()
end
-->8
-- main menu

function init_menu()
	tcol = 2
	menu_offset = 30
	
	menu_items = {
		"new game",
		"options",
		"help",
		"high scores"
	}
	
	item_selected = 1
end

function update_menu()
	tcol += 1
	if (tcol > 15) then
		tcol = 2
	end
	
	if(btnp(⬇️)) then
		item_selected += 1
	elseif(btnp(⬆️)) then
		item_selected -= 1
	end
	
	item_selected = mid(1, item_selected, #menu_items)
	
	if(btnp(❎)) then
		if(item_selected == 1) then
			change_state(init_game,update_game,draw_game)
		end
	end
end

function draw_menu()
	cls(1)
	centre_text("pico defense",1,tcol)
	
	
	for i = 1, #menu_items do
		item_col = 7
		if (i == item_selected) item_col = 10
		centre_text(menu_items[i], 10*i+menu_offset, item_col)
	end
	
	spr(1,35,10*item_selected+menu_offset-1)
	
	centre_text("⬆️ / ⬇️ select",100,7)
	centre_text("❎ to confirm",110,7)
end

function centre_text(str, sy, col)
	local sx = 64 - flr((#str*4)/2)
	print(str,sx,sy,col)
end
-->8
-- game state
function init_game()
end

function update_game()
end

function draw_game()
	cls()
	map(0,0,0,0,16,12)
end
__gfx__
00000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000aa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700aaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000aaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000aaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700aa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333333444444334444443344444433333333333333333000000000000000000000000000000000000000000000000000000000000000000000000
33333333444444443444444334444444444444433444444444444443000000000000000000000000000000000000000000000000000000000000000000000000
33333333444444443444444334444444444444433444444444444443000000000000000000000000000000000000000000000000000000000000000000000000
33333333444444443444444334444444444444433444444444444443000000000000000000000000000000000000000000000000000000000000000000000000
33333333444444443444444334444444444444433444444444444443000000000000000000000000000000000000000000000000000000000000000000000000
33333333444444443444444334444444444444433444444444444443000000000000000000000000000000000000000000000000000000000000000000000000
33333333444444443444444334444444444444433444444444444443000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333333444444333333333333333333444444334444443000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010151111111610101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111141010101210101015111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101210101012101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101210101012101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101210101012101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101311111114101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
